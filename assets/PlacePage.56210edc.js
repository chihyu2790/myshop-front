import{Q as d}from"./QSeparator.d36ff4c0.js";import{Q as w}from"./QRadio.4058e9ee.js";import{Q as m}from"./QInput.bef99052.js";import{Q as z}from"./QImg.d88c2cdb.js";import{Q as v}from"./QSpace.ab43215f.js";import{u as U,q as _,a as y,x as h,y as f,z as c,au as B,X as C,D as t,B as l,Y as S,Z as P,_ as r,G as j,$ as I,E as b,Q as N}from"./index.0d4fdb09.js";import{Q as g}from"./QCard.08b29dcf.js";import{Q as $}from"./QForm.ddf020d2.js";import{Q as D}from"./QPage.ba57bee6.js";import"./use-dark.60ffaa8c.js";import"./option-sizes.76e9a136.js";import"./use-form.299f2ee0.js";import"./use-key-composition.43e9e573.js";import"./uid.42677368.js";const E={class:"container"},F={class:"row"},A={class:"col"},G=t("div",{class:"text-h4 text-weight-medium"},"\u8A02\u55AE\u8CC7\u8A0A",-1),L=t("div",{class:"text-h5"},"\u53D6\u8CA8\u65B9\u5F0F",-1),R={class:"q-my-lg column"},T=t("div",{class:"text-h5"},"\u53D6\u8CA8\u4EBA\u8CC7\u8A0A",-1),X={style:{"max-width":"600px"}},Y=t("div",{class:"text-subtitle1 text-weight-medium"},"\u53D6\u8CA8\u4EBA\u540D\u5B57:",-1),Z=t("div",{class:"text-subtitle1 text-weight-medium"},"\u53D6\u8CA8\u4EBA\u96FB\u8A71:",-1),H=t("div",{class:"text-subtitle1 text-weight-medium"},"\u53D6\u8CA8\u4EBA\u5730\u5740:",-1),J=t("div",{class:"text-subtitle1 text-weight-medium"},"\u53D6\u8CA8\u4EBAe-mail:",-1),K=t("div",{class:"text-h5"},"\u5546\u54C1\u8CC7\u8A0A",-1),M={class:"row"},O={class:"col-7 column q-ml-md"},W={class:"text-h6"},tt={class:"text-subtitle1 text-weight-medium"},et={class:"text-subtitle1 text-weight-medium"},st={class:"text-subtitle1 text-weight-medium"},lt={class:"col column items-end"},ot={class:"text-subtitle1 text-weight-medium"},at={class:"col-12 col-lg-2 q-mt-lg-xl"},it={class:"row justify-between"},rt=t("div",{class:"text-subtitle1 text-weight-medium"},"\u5546\u54C1\u91D1\u984D",-1),dt={class:"text-subtitle1 text-weight-regular"},ct=t("div",{class:"row justify-between"},[t("div",{class:"text-subtitle1 text-weight-medium"},"\u904B\u8CBB"),t("div",{class:"text-subtitle1 text-weight-regular"},"80")],-1),ut={class:"row justify-between"},nt=t("div",{class:"text-subtitle1 text-weight-medium"},"\u7E3D\u91D1\u984D",-1),mt={class:"text-subtitle1 text-weight-regular"},_t={class:"row reverse q-mt-xl"},ht={class:"col-12 col-sm-6 col-lg-3"},St={__name:"PlacePage",setup(gt){const p=U(),i=_([]),a=_({getway:"",getname:"",getphone:"",getemail:"",getaddress:""}),u=_({required(s){return!!s||"\u5FC5\u586B"},price(s){return s>-1||"\u5FC5\u9808\u5927\u65BC\u7B49\u65BC 0"},size(s){var o,e,n;return!s||!s.length||((e=(o=s[0])==null?void 0:o.type)==null?void 0:e.includes("image"))&&((n=s[0])==null?void 0:n.size)<1024*1024||"\u6A94\u6848\u683C\u5F0F\u4E0D\u7B26"}}),q=y(()=>i.reduce((o,e)=>o+e.product.price*e.quantity,0)),V=y(()=>{const s=i.reduce((o,e)=>o+e.product.price*e.quantity,0);return s===0?0:s>=1500?s:s+80}),Q=async s=>{await p.deleteCart({product:i[s].product._id,color:i[s].color,size:i[s].size}),x()},k=()=>{p.checkout(a)},x=async()=>{try{const{data:s}=await B.get("/users/cart");i.splice(0,i.length),i.push(...s.result)}catch{C.fire({icon:"error",title:"\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}};return x(),(s,o)=>(h(),f(D,null,{default:c(()=>[t("section",E,[t("div",F,[t("div",A,[l($,{onSubmit:k},{default:c(()=>[l(g,{flat:"",class:"q-my-sm q-my-lg-xl"},{default:c(()=>[G,l(d,{class:"q-my-md"}),L,l(d,{class:"q-my-md"}),t("div",R,[l(w,{modelValue:a.getway,"onUpdate:modelValue":o[0]||(o[0]=e=>a.getway=e),val:0,label:"7-11\u8CA8\u5230\u5E9C\u6B3E",color:"black"},null,8,["modelValue"]),l(w,{modelValue:a.getway,"onUpdate:modelValue":o[1]||(o[1]=e=>a.getway=e),val:1,label:"\u5B85\u914D\u5230\u5E9C",color:"black"},null,8,["modelValue"])]),T,l(d,{class:"q-my-md"}),t("div",X,[Y,l(m,{modelValue:a.getname,"onUpdate:modelValue":o[2]||(o[2]=e=>a.getname=e),rules:[u.required],color:"black"},null,8,["modelValue","rules"]),Z,l(m,{modelValue:a.getphone,"onUpdate:modelValue":o[3]||(o[3]=e=>a.getphone=e),rules:[u.required],color:"black"},null,8,["modelValue","rules"]),H,l(m,{modelValue:a.getaddress,"onUpdate:modelValue":o[4]||(o[4]=e=>a.getaddress=e),rules:[u.required],color:"black"},null,8,["modelValue","rules"]),J,l(m,{class:"q-mb-lg",modelValue:a.getemail,"onUpdate:modelValue":o[5]||(o[5]=e=>a.getemail=e),rules:[u.required],color:"black"},null,8,["modelValue","rules"])]),K,l(d,{class:"q-my-md"}),(h(!0),S(I,null,P(i,(e,n)=>(h(),f(g,{class:"my-card",flat:"",key:e._id},{default:c(()=>[t("div",M,[l(z,{class:"col-2",src:e.product.image[0]},null,8,["src"]),t("div",O,[t("div",W,r(e.product.name),1),l(v),t("div",tt,"\u5546\u54C1\u5C3A\u5BF8:"+r(e.size),1),t("div",et,"\u5546\u54C1\u984F\u8272:"+r(e.color),1),t("div",st,"\u6578\u91CF:"+r(e.quantity),1)]),t("div",lt,[l(j,{name:"fa-solid fa-x",size:"sm",class:"pointer",onClick:pt=>Q(n)},null,8,["onClick"]),l(v),t("div",ot,"NT$:"+r(e.product.price*e.quantity),1)])]),l(d,{class:"q-my-md"})]),_:2},1024))),128)),l(g,{class:"row reverse my-card q-mt-sm q-mt-lg-xl"},{default:c(()=>[t("div",at,[t("div",it,[rt,t("div",dt,r(b(q)),1)]),ct,t("div",ut,[nt,t("div",mt,r(b(V)),1)])])]),_:1}),l(d,{class:"q-my-md"}),t("div",_t,[t("div",ht,[l(N,{unelevated:"",square:"",color:"red",class:"q-py-sm full-width text-subtitle1 text-weight-medium",label:"\u5546\u54C1\u7D50\u5E33",type:"submit"})])])]),_:1})]),_:1})])])])]),_:1}))}};export{St as default};
