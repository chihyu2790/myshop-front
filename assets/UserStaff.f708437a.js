import{Q as I}from"./QSpace.c72392b0.js";import{Q as N}from"./QImg.f9af7805.js";import{N as $,r as E,F as c,P as M,H as r,I as x,J as d,ay as _,aj as p,S as e,K as a,V as m,U as V,M as b,Q as h,Y as Q,aB as v,W as A,X as D}from"./index.34a9c747.js";import{Q as U}from"./QCard.f4c18fa6.js";import{Q as f}from"./QInput.cf5fb9e5.js";import{Q as g}from"./QRadio.8510f6e2.js";import{Q as P}from"./QFile.4cfe247d.js";import{Q as j}from"./QForm.c3dd6ee1.js";import{Q as z}from"./QPage.68bd7ebf.js";import"./use-dark.cd2d25a8.js";import"./use-key-composition.425bb1da.js";import"./format.2a3572e1.js";import"./uid.42677368.js";import"./focus-manager.d6507951.js";import"./use-form.2d350bda.js";import"./option-sizes.c5d296bb.js";import"./QChip.0bcd8414.js";const G={class:"container"},H={class:"row q-mt-xl"},J={class:"col-2"},K=e("div",{class:"text-h6"},"\u5E97\u54E1\u7BA1\u7406",-1),L=e("div",{class:"text-subtitle1 q-my-lg"},"\u5E97\u54E1\u8CC7\u6599",-1),R=e("div",{class:"text-subtitle1 q-my-lg"},"\u7A7F\u642D\u7BA1\u7406",-1),W={class:"col-10"},X={class:"flex items-center text-center q-mb-lg"},Y={key:0,class:"text-h4 text-weight-medium"},O={key:1,class:"text-h4 text-weight-medium"},T=e("div",{class:"text-body1 q-mb-md"},"GU\u5E97\u54E1\u8CC7\u8A0A\u9801\u9762",-1),Z=e("div",{class:"text-subtitle1 text-weight-bold"},"\u540D\u5B57:",-1),tt={class:"text-subtitle1 q-mb-md"},et=e("div",{class:"text-subtitle1 text-weight-bold"},"\u6027\u5225:",-1),st={key:0,class:"text-subtitle1 q-mb-md"},lt={key:1,class:"text-subtitle1 q-mb-md"},ot=e("div",{class:"text-subtitle1 text-weight-bold"},"\u8EAB\u9AD8:",-1),it={class:"text-subtitle1 q-mb-md"},at=e("div",{class:"text-subtitle1 q-mb-md text-weight-bold"},"\u5927\u982D\u8CBC:",-1),rt=e("div",{class:"text-subtitle1 q-mt-md text-weight-bold"},"\u5E97\u92EA\u4F4D\u7F6E:",-1),dt={class:"text-subtitle1 q-mb-md"},nt=e("div",{class:"text-subtitle1 text-weight-bold"},"\u81EA\u6211\u4ECB\u7D39:",-1),mt={class:"text-subtitle1 q-mb-md"},ut={style:{"max-width":"400px"}},ct=e("div",{class:"text-subtitle1 text-weight-medium"},"\u540D\u5B57:",-1),xt=e("div",{class:"text-subtitle1 text-weight-medium"},"\u6027\u5225:",-1),pt={class:"q-my-md"},bt=e("div",{class:"text-subtitle1 text-weight-medium"},"\u8EAB\u9AD8:",-1),_t=e("div",{class:"text-subtitle1 text-weight-medium q-mb-lg"},"\u5927\u982D\u8CBC:",-1),ht=e("div",{class:"text-subtitle1 text-weight-medium q-mb-lg"},"\u81EA\u6211\u4ECB\u7D39:",-1),vt=e("div",{class:"text-subtitle1 text-weight-medium"},"\u5E97\u92EA\u4F4D\u7F6E:",-1),ft={class:"q-my-md"},gt={class:"q-my-xxl"},Pt={__name:"UserStaff",setup(qt){$();const n=E(!0),q=c([]),o=c({name:"",sex:2,height:165,avatar:"",stores:"",description:""}),s=c({name:"",sex:2,height:165,avatar:null,stores:"",description:""}),u=c({required(i){return!!i||"\u5FC5\u586B"}}),C=()=>{n.value=!1,s.name=o.name,s.sex=o.sex,s.height=o.height,s.avatar=null,s.stores=o.stores._id,s.description=o.description},S=async()=>{const i=new FormData;for(const t in s)t==="image"&&s.avatar===null||i.append(t,s[t]);try{const{data:t}=await _.patch("/staffs",i);p.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),y(),n.value=!0}catch(t){p.fire({icon:"error",title:"\u7DE8\u8F2F\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}},y=async()=>{try{const{data:i}=await _.get("/staffs");o.name=i.result.name,o.sex=i.result.sex,o.height=i.result.height,o.avatar=i.result.avatar,o.stores=i.result.stores,o.description=i.result.description}catch{p.fire({icon:"error",title:"\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}},B=async()=>{try{const{data:i}=await _.get("/stores");q.push(...i.result)}catch{p.fire({icon:"error",title:"\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}};return y(),B(),(i,t)=>{const w=M("router-link");return r(),x(z,{class:"q-mb-xxxl"},{default:d(()=>[e("section",G,[e("div",H,[e("div",J,[K,a(w,{to:"/staff"},{default:d(()=>[L]),_:1}),a(w,{to:"/staff/styling"},{default:d(()=>[R]),_:1})]),e("div",W,[e("div",X,[n.value?(r(),m("div",Y,"\u5E97\u54E1\u8CC7\u6599")):V("",!0),n.value?V("",!0):(r(),m("div",O,"\u4FEE\u6539\u8CC7\u6599")),a(I)]),T,n.value?(r(),x(U,{key:0,flat:"",bordered:"",class:"q-pa-md"},{default:d(()=>{var l;return[Z,e("div",tt,b(o.name),1),et,o.sex==1?(r(),m("div",st,"\u7537")):(r(),m("div",lt,"\u5973")),ot,e("div",it,b(o.height),1),at,a(N,{src:o.avatar,style:{height:"140px","max-width":"150px"}},null,8,["src"]),rt,e("div",dt,b((l=o.stores)==null?void 0:l.name),1),nt,e("div",mt,b(o.description),1),a(h,{color:"black",class:"q-py-sm q-px-lg text-subtitle2 q-my-xxl",outline:"",label:"\u4FEE\u6539\u5E97\u54E1\u8CC7\u6599",onClick:t[0]||(t[0]=k=>C())})]}),_:1})):(r(),x(U,{key:1,flat:"",bordered:"",class:"q-pa-md"},{default:d(()=>[a(j,{onSubmit:t[11]||(t[11]=v(l=>S(),["prevent"]))},{default:d(()=>[e("div",ut,[ct,a(f,{modelValue:s.name,"onUpdate:modelValue":t[1]||(t[1]=l=>s.name=l),rules:[u.required],color:"black"},null,8,["modelValue","rules"]),xt,e("div",pt,[a(g,{class:"text-weight-medium",modelValue:s.sex,"onUpdate:modelValue":t[2]||(t[2]=l=>s.sex=l),val:1,label:"\u7537",color:"black"},null,8,["modelValue"]),a(g,{class:"text-weight-medium",modelValue:s.sex,"onUpdate:modelValue":t[3]||(t[3]=l=>s.sex=l),val:0,label:"\u5973",color:"black"},null,8,["modelValue"])]),bt,a(f,{modelValue:s.height,"onUpdate:modelValue":t[4]||(t[4]=l=>s.height=l),modelModifiers:{number:!0},rules:[u.required],color:"black"},null,8,["modelValue","rules"]),_t,a(P,{modelValue:s.avatar,"onUpdate:modelValue":t[7]||(t[7]=l=>s.avatar=l),rules:[u.size],accept:"image/*",filled:"","bottom-slots":"",counter:""},{prepend:d(()=>[a(Q,{name:"cloud_upload",onClick:t[5]||(t[5]=v(()=>{},["stop","prevent"]))})]),append:d(()=>[a(Q,{name:"close",onClick:t[6]||(t[6]=v(l=>i.model=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:d(()=>[]),_:1},8,["modelValue","rules"]),ht,a(f,{modelValue:s.description,"onUpdate:modelValue":t[8]||(t[8]=l=>s.description=l),type:"textarea",rules:[u.required],filled:"",color:"black"},null,8,["modelValue","rules"])]),vt,e("div",ft,[(r(!0),m(D,null,A(q,(l,k)=>(r(),x(g,{modelValue:s.stores,"onUpdate:modelValue":t[9]||(t[9]=F=>s.stores=F),color:"black",val:l._id,label:l.name,key:k},null,8,["modelValue","val","label"]))),128))]),e("div",gt,[a(h,{outline:"",class:"q-py-sm q-px-xxl text-subtitle2 q-mr-md",color:"black",label:"\u53D6\u6D88",onClick:t[10]||(t[10]=l=>n.value=!0)}),a(h,{type:"submit",unelevated:"",class:"q-py-sm q-px-xxl text-subtitle2",color:"black text-white",label:"\u78BA\u5B9A"})])]),_:1})]),_:1}))])])])]),_:1})}}};export{Pt as default};
