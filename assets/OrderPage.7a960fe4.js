import{b as m,a as f}from"./QTabs.fa553ba4.js";import{Q as _}from"./QSpace.d3f204b9.js";import{Q as c,a as w}from"./QTable.4f1157f0.js";import{F as u,K as v,L as d,M as q,N as s,au as y,a9 as Q,R as t,O as o,ae as k,ac as a,aa as p,Q as h,S as P}from"./index.492ee51d.js";import{Q as T}from"./QCard.766ea478.js";import{Q as N}from"./QPage.8117ed8d.js";import{u as B}from"./use-quasar.52c4c148.js";import"./use-timeout.56b3988f.js";import"./rtl.4b414a6d.js";import"./QSeparator.21ecd9d9.js";import"./use-dark.d31f5b16.js";import"./QList.71ecb80c.js";import"./use-prevent-scroll.890189cd.js";import"./use-key-composition.c76fd261.js";import"./format.2a3572e1.js";import"./uid.42677368.js";import"./use-form.160d3c21.js";import"./QChip.f7be4a19.js";import"./QItem.0aff7d08.js";import"./selection.790bdf15.js";import"./use-model-toggle.18d5681f.js";import"./QDialog.81cf8a30.js";import"./QCheckbox.c5540ec3.js";import"./option-sizes.99366c99.js";import"./use-fullscreen.0371c278.js";const S={class:"row lt-lg justify-center border-black bg-grey-2 q-py-xs"},C={class:"container"},D={class:"row q-mt-none q-mt-lg-xl"},V={class:"col-2 gt-md"},$=t("div",{class:"text-h6"},"\u6211\u7684\u5E33\u6236",-1),L=t("div",{class:"text-subtitle1 q-my-lg"},"\u500B\u4EBA\u8CC7\u6599",-1),O=t("div",{class:"text-subtitle1 q-my-lg"},"\u8A02\u55AE\u67E5\u8A62",-1),R={class:"col-12 col-lg-10"},j={class:"flex items-center text-center q-mb-lg q-mt-lg q-mt-lg-none"},A=t("div",{class:"text-h4 text-weight-medium"},"\u8A02\u55AE\u67E5\u8A62",-1),E=t("div",{class:"text-body1 q-mb-md"},"\u8A02\u55AE\u67E5\u8A62\u9801\u9762",-1),F={key:0},K={key:1},M={class:"row"},z={class:"column"},G=t("div",{class:"text-subtitle1 text-weight-medium"},"\u8A02\u55AE\u65E5\u671F",-1),H={class:"text-subtitle1 text-weight-medium"},I=t("div",{class:"text-subtitle1 text-weight-medium"},"\u8A02\u55AE\u7DE8\u865F",-1),J={class:"text-subtitle1 text-weight-medium"},U=t("div",{class:"text-subtitle1 text-weight-medium"},"\u50F9\u9322",-1),W={class:"text-subtitle1 text-weight-medium"},Qt={__name:"OrderPage",setup(X){const g=B(),x=u({item:[],page:1,rowsPerPage:0}),b=[{name:"date",align:"left",label:"\u8A02\u55AE\u65E5\u671F",field:"date"},{name:"_id",align:"left",label:"\u8A02\u55AE\u7DE8\u865F",field:"_id"},{name:"totalPrice",align:"left",label:"\u50F9\u9322",field:"totalPrice"},{name:"edit",label:"",align:"left",field:"edit"}],n=u([]);return(async()=>{try{const{data:l}=await y.get("/orders");n.push(...l.result.map(i=>(i.totalPrice=i.products.reduce((r,e)=>r+e.product.price*e.quantity,0),i)))}catch{Q.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(l,i)=>{const r=v("router-link");return d(),q(N,null,{default:s(()=>[t("div",S,[o(f,{"indicator-color":"red",shrink:""},{default:s(()=>[o(m,{exact:"",name:"/user",to:"/user",label:"\u500B\u4EBA\u8CC7\u6599"}),o(m,{exact:"",name:"/order",to:"/order",label:"\u8A02\u55AE\u67E5\u8A62"})]),_:1})]),t("section",C,[t("div",D,[t("div",V,[$,o(r,{to:"/user"},{default:s(()=>[L]),_:1}),o(r,{to:"/order"},{default:s(()=>[O]),_:1})]),t("div",R,[t("div",j,[A,o(_)]),E,o(w,{grid:P(g).screen.sm,flat:"",bordered:"",rows:n,columns:b,"row-key":"name",pagination:x},{"body-cell-date":s(e=>[o(c,{date:e},{default:s(()=>[k(a(e.row.date),1)]),_:2},1032,["date"])]),"body-cell-totalPrice":s(e=>[o(c,{date:e},{default:s(()=>[e.row.totalPrice<1500?(d(),p("span",F,"NT$ "+a(e.row.totalPrice+80),1)):(d(),p("span",K,"NT$ "+a(e.row.totalPrice),1))]),_:2},1032,["date"])]),"body-cell-edit":s(e=>[o(c,{edit:e},{default:s(()=>[t("div",M,[o(_),o(h,{outline:"",class:"q-px-xl",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1032,["edit"])]),item:s(e=>[o(T,{class:"q-pa-md q-ma-sm",bordered:"",flat:""},{default:s(()=>[t("div",z,[G,t("div",H,a(new Date(e.row.date).toLocaleDateString()),1),I,t("div",J,a(e.row._id),1),U,t("div",W,a(e.row.totalPrice),1),o(h,{outline:"",class:"q-px-xl q-m",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1024)]),_:1},8,["grid","rows","pagination"])])])])]),_:1})}}};export{Qt as default};
