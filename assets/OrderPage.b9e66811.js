import{b as m,a as f}from"./QTabs.344a2f76.js";import{Q as _}from"./QSpace.66f19284.js";import{Q as c,a as w}from"./QTable.1d20975d.js";import{q as u,x as d,y as v,z as s,au as q,X as y,A as Q,D as t,B as o,a0 as k,_ as a,Y as p,Q as h,E as P}from"./index.a2b03e35.js";import{Q as T}from"./QCard.f8756602.js";import{Q as B}from"./QPage.6e7da592.js";import{u as N}from"./use-quasar.39cb5b84.js";import"./use-timeout.89e79e2b.js";import"./rtl.4b414a6d.js";import"./QSeparator.b1bf199b.js";import"./use-dark.dbe5cfd8.js";import"./QList.3b3d8e16.js";import"./scroll.2858db06.js";import"./use-key-composition.12b6fd52.js";import"./uid.42677368.js";import"./use-form.3b0c811f.js";import"./QChip.cd3bf68f.js";import"./QItem.a39cb856.js";import"./use-fullscreen.bd96892b.js";import"./use-model-toggle.09f48a42.js";import"./QDialog.47244a69.js";import"./QCheckbox.90a3c216.js";import"./option-sizes.8cfdc71b.js";const D={class:"row lt-lg justify-center border-black bg-grey-2 q-py-xs"},S={class:"container"},C={class:"row q-mt-none q-mt-lg-xl"},V={class:"col-2 gt-md"},$=t("div",{class:"text-h6"},"\u6211\u7684\u5E33\u6236",-1),A=t("div",{class:"text-subtitle1 q-my-lg"},"\u500B\u4EBA\u8CC7\u6599",-1),E=t("div",{class:"text-subtitle1 q-my-lg"},"\u8A02\u55AE\u67E5\u8A62",-1),j={class:"col-12 col-lg-10"},z={class:"flex items-center text-center q-mb-lg q-mt-lg q-mt-lg-none"},L=t("div",{class:"text-h4 text-weight-medium"},"\u8A02\u55AE\u67E5\u8A62",-1),O=t("div",{class:"text-body1 q-mb-md"},"\u8A02\u55AE\u67E5\u8A62\u9801\u9762",-1),R={key:0},X={key:1},Y={class:"row"},F={class:"column"},G=t("div",{class:"text-subtitle1 text-weight-medium"},"\u8A02\u55AE\u65E5\u671F",-1),H={class:"text-subtitle1 text-weight-medium"},I=t("div",{class:"text-subtitle1 text-weight-medium"},"\u8A02\u55AE\u7DE8\u865F",-1),J={class:"text-subtitle1 text-weight-medium"},K=t("div",{class:"text-subtitle1 text-weight-medium"},"\u50F9\u9322",-1),M={class:"text-subtitle1 text-weight-medium"},qt={__name:"OrderPage",setup(U){const g=N(),x=u({item:[],page:1,rowsPerPage:0}),b=[{name:"date",align:"left",label:"\u8A02\u55AE\u65E5\u671F",field:"date"},{name:"_id",align:"left",label:"\u8A02\u55AE\u7DE8\u865F",field:"_id"},{name:"totalPrice",align:"left",label:"\u50F9\u9322",field:"totalPrice"},{name:"edit",label:"",align:"left",field:"edit"}],n=u([]);return(async()=>{try{const{data:r}=await q.get("/orders");n.push(...r.result.map(i=>(i.totalPrice=i.products.reduce((l,e)=>l+e.product.price*e.quantity,0),i)))}catch{y.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(r,i)=>{const l=Q("router-link");return d(),v(B,null,{default:s(()=>[t("div",D,[o(f,{"indicator-color":"red",shrink:""},{default:s(()=>[o(m,{exact:"",name:"/user",to:"/user",label:"\u500B\u4EBA\u8CC7\u6599"}),o(m,{exact:"",name:"/order",to:"/order",label:"\u8A02\u55AE\u67E5\u8A62"})]),_:1})]),t("section",S,[t("div",C,[t("div",V,[$,o(l,{to:"/user"},{default:s(()=>[A]),_:1}),o(l,{to:"/order"},{default:s(()=>[E]),_:1})]),t("div",j,[t("div",z,[L,o(_)]),O,o(w,{grid:P(g).screen.sm,flat:"",bordered:"",rows:n,columns:b,"row-key":"name",pagination:x},{"body-cell-date":s(e=>[o(c,{date:e},{default:s(()=>[k(a(e.row.date),1)]),_:2},1032,["date"])]),"body-cell-totalPrice":s(e=>[o(c,{date:e},{default:s(()=>[e.row.totalPrice<1500?(d(),p("span",R,"NT$ "+a(e.row.totalPrice+80),1)):(d(),p("span",X,"NT$ "+a(e.row.totalPrice),1))]),_:2},1032,["date"])]),"body-cell-edit":s(e=>[o(c,{edit:e},{default:s(()=>[t("div",Y,[o(_),o(h,{outline:"",class:"q-px-xl",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1032,["edit"])]),item:s(e=>[o(T,{class:"q-pa-md q-ma-sm",bordered:"",flat:""},{default:s(()=>[t("div",F,[G,t("div",H,a(new Date(e.row.date).toLocaleDateString()),1),I,t("div",J,a(e.row._id),1),K,t("div",M,a(e.row.totalPrice),1),o(h,{outline:"",class:"q-px-xl q-m",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1024)]),_:1},8,["grid","rows","pagination"])])])])]),_:1})}}};export{qt as default};
