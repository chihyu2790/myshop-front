import{Q as E}from"./QSpace.91a09767.js";import{Q as M}from"./QImg.9b3d27f0.js";import{N as A,r as D,F as x,P,H as r,I as p,J as d,ay as v,aj as b,S as e,K as a,T as Q,V as u,U,M as n,Q as h,Y as C,aB as _,W as j,X as z}from"./index.78540292.js";import{Q as S}from"./QCard.626c9880.js";import{Q as g}from"./QInput.43a27201.js";import{Q as f}from"./QRadio.c36f924f.js";import{Q as G}from"./QFile.464a45fe.js";import{Q as H}from"./QForm.1941dbfc.js";import{Q as J}from"./QPage.7f90bc83.js";import"./use-dark.a9d4335d.js";import"./use-key-composition.1bc00443.js";import"./format.2a3572e1.js";import"./uid.42677368.js";import"./focus-manager.d6507951.js";import"./use-form.852ad25a.js";import"./option-sizes.95359951.js";import"./QChip.711d1465.js";const K={class:"container"},L={class:"row q-mt-xl"},R={class:"col-2"},T=e("div",{class:"text-h6"},"\u5E97\u54E1\u7BA1\u7406",-1),W=e("div",{class:"text-subtitle1 q-my-lg"},"\u5E97\u54E1\u8CC7\u6599",-1),X=e("div",{class:"text-subtitle1 q-my-lg"},"\u7A7F\u642D\u7BA1\u7406",-1),Y={class:"col-10"},O={class:"flex items-center text-center q-mb-lg"},Z={key:0,class:"text-h4 text-weight-medium"},tt={key:1,class:"text-h4 text-weight-medium"},et=e("div",{class:"text-body1 q-mb-md"},"GU\u5E97\u54E1\u8CC7\u8A0A\u9801\u9762",-1),st=e("div",{class:"text-subtitle1 text-weight-bold"},"\u540D\u5B57:",-1),ot={class:"text-subtitle1 q-mb-md"},lt=e("div",{class:"text-subtitle1 text-weight-bold"},"\u6027\u5225:",-1),it={key:0,class:"text-subtitle1 q-mb-md"},at={key:1,class:"text-subtitle1 q-mb-md"},rt=e("div",{class:"text-subtitle1 text-weight-bold"},"\u8EAB\u9AD8:",-1),dt={class:"text-subtitle1 q-mb-md"},nt=e("div",{class:"text-subtitle1 q-mb-md text-weight-bold"},"\u5927\u982D\u8CBC:",-1),mt=e("div",{class:"text-subtitle1 q-mt-md text-weight-bold"},"\u5E97\u92EA\u4F4D\u7F6E:",-1),ut={class:"text-subtitle1 q-mb-md"},ct=e("div",{class:"text-subtitle1 text-weight-bold"},"\u81EA\u6211\u4ECB\u7D39:",-1),xt={class:"text-subtitle1 q-mb-md"},pt={style:{"max-width":"400px"}},bt=e("div",{class:"text-subtitle1 text-weight-medium"},"\u540D\u5B57:",-1),vt={class:"text-subtitle1 text-weight-medium"},ht={class:"q-my-md"},_t={class:"text-subtitle1 text-weight-medium"},gt={class:"text-subtitle1 text-weight-medium q-mb-lg"},ft={class:"text-subtitle1 text-weight-medium q-mb-lg"},qt={class:"text-subtitle1 text-weight-medium"},yt={class:"q-my-md"},kt={class:"q-my-xxl"},Gt={__name:"UserStaff",setup(wt){const B=A(),{logout:q}=B,m=D(!0),y=x([]),l=x({name:"",sex:2,height:165,avatar:"",stores:"",description:""}),s=x({name:"",sex:2,height:165,avatar:null,stores:"",description:""}),c=x({required(i){return!!i||"\u5FC5\u586B"}}),F=()=>{m.value=!1,s.name=l.name,s.sex=l.sex,s.height=l.height,s.avatar=null,s.stores=l.stores._id,s.description=l.description},I=async()=>{const i=new FormData;for(const t in s)t==="image"&&s.avatar===null||i.append(t,s[t]);try{const{data:t}=await v.patch("/staffs",i);b.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"}),k(),m.value=!0}catch(t){b.fire({icon:"error",title:"\u7DE8\u8F2F\u5931\u6557",text:t.isAxiosError?t.response.data.message:t.message})}},k=async()=>{try{const{data:i}=await v.get("/staffs");l.name=i.result.name,l.sex=i.result.sex,l.height=i.result.height,l.avatar=i.result.avatar,l.stores=i.result.stores,l.description=i.result.description}catch{b.fire({icon:"error",title:"\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}},N=async()=>{try{const{data:i}=await v.get("/stores");y.push(...i.result)}catch{b.fire({icon:"error",title:"\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}};return k(),N(),(i,t)=>{const w=P("router-link");return r(),p(J,null,{default:d(()=>[e("section",K,[e("div",L,[e("div",R,[T,a(w,{to:"/staff"},{default:d(()=>[W]),_:1}),a(w,{to:"/staff/styling"},{default:d(()=>[X]),_:1}),e("div",{class:"text-subtitle1 q-my-lg pointer",onClick:t[0]||(t[0]=(...o)=>Q(q)&&Q(q)(...o))},"\u767B\u51FA")]),e("div",Y,[e("div",O,[m.value?(r(),u("div",Z,"\u5E97\u54E1\u8CC7\u6599")):U("",!0),m.value?U("",!0):(r(),u("div",tt,"\u4FEE\u6539\u8CC7\u6599")),a(E)]),et,m.value?(r(),p(S,{key:0,flat:"",bordered:"",class:"q-pa-md"},{default:d(()=>{var o;return[st,e("div",ot,n(l.name),1),lt,l.sex==1?(r(),u("div",it,"\u7537")):(r(),u("div",at,"\u5973")),rt,e("div",dt,n(l.height),1),nt,a(M,{src:l.avatar,style:{height:"140px","max-width":"150px"}},null,8,["src"]),mt,e("div",ut,n((o=l.stores)==null?void 0:o.name),1),ct,e("div",xt,n(l.description),1),a(h,{color:"black",class:"q-py-sm q-px-lg text-subtitle2 q-mt-xl",outline:"",label:"\u4FEE\u6539\u5E97\u54E1\u8CC7\u6599",onClick:t[1]||(t[1]=V=>F())})]}),_:1})):(r(),p(S,{key:1,flat:"",bordered:"",class:"q-pa-md"},{default:d(()=>[a(H,{onSubmit:t[12]||(t[12]=_(o=>I(),["prevent"]))},{default:d(()=>[e("div",pt,[bt,a(g,{modelValue:s.name,"onUpdate:modelValue":t[2]||(t[2]=o=>s.name=o),rules:[c.required],color:"black"},null,8,["modelValue","rules"]),e("div",vt,"\u6027\u5225:"+n(s.sex),1),e("div",ht,[a(f,{class:"text-weight-medium",modelValue:s.sex,"onUpdate:modelValue":t[3]||(t[3]=o=>s.sex=o),val:1,label:"\u7537",color:"black"},null,8,["modelValue"]),a(f,{class:"text-weight-medium",modelValue:s.sex,"onUpdate:modelValue":t[4]||(t[4]=o=>s.sex=o),val:0,label:"\u5973",color:"black"},null,8,["modelValue"])]),e("div",_t,"\u8EAB\u9AD8:"+n(s.height),1),a(g,{modelValue:s.height,"onUpdate:modelValue":t[5]||(t[5]=o=>s.height=o),modelModifiers:{number:!0},rules:[c.required],color:"black"},null,8,["modelValue","rules"]),e("div",gt,"\u5927\u982D\u8CBC:"+n(s.avatar),1),a(G,{modelValue:s.avatar,"onUpdate:modelValue":t[8]||(t[8]=o=>s.avatar=o),rules:[c.size],accept:"image/*",filled:"","bottom-slots":"",counter:""},{prepend:d(()=>[a(C,{name:"cloud_upload",onClick:t[6]||(t[6]=_(()=>{},["stop","prevent"]))})]),append:d(()=>[a(C,{name:"close",onClick:t[7]||(t[7]=_(o=>i.model=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:d(()=>[]),_:1},8,["modelValue","rules"]),e("div",ft,"\u81EA\u6211\u4ECB\u7D39:"+n(s.description),1),a(g,{modelValue:s.description,"onUpdate:modelValue":t[9]||(t[9]=o=>s.description=o),type:"textarea",rules:[c.required],filled:"",color:"black"},null,8,["modelValue","rules"])]),e("div",qt,"\u5E97\u92EA\u4F4D\u7F6E:"+n(s.stores),1),e("div",yt,[(r(!0),u(z,null,j(y,(o,V)=>(r(),p(f,{modelValue:s.stores,"onUpdate:modelValue":t[10]||(t[10]=$=>s.stores=$),color:"black",val:o._id,label:o.name,key:V},null,8,["modelValue","val","label"]))),128))]),e("div",kt,[a(h,{outline:"",class:"q-py-sm q-px-xxl text-subtitle2 q-mr-md",color:"black",label:"\u53D6\u6D88",onClick:t[11]||(t[11]=o=>m.value=!0)}),a(h,{type:"submit",unelevated:"",class:"q-py-sm q-px-xxl text-subtitle2",color:"black text-white",label:"\u78BA\u5B9A"})])]),_:1})]),_:1}))])])])]),_:1})}}};export{Gt as default};
