import{a8 as y,r as x,G as I,h as X,a9 as Y,aa as A,ab as G,w as K,a as H,x as N,ac as Q,ad as C,$ as R,f as s,o as z,ae as W,E as a,u as j,af as B}from"./index.eea27d61.js";import{r as _,b as U}from"./focus-manager.d6507951.js";const g=[];function fe(e){return g.find(t=>t.__qPortalInnerRef.value!==null&&t.__qPortalInnerRef.value.contains(e))}function J(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return y(e)}else if(e.__qPortalInnerRef!==void 0){const o=y(e);return o!==void 0&&o.$options.name==="QPopupProxy"?(e.hide(t),o):e}e=y(e)}while(e!=null)}function pe(e,t,o){for(;o!==0&&e!==void 0&&e!==null;){if(e.__qPortalInnerRef!==void 0){if(o--,e.$options.name==="QMenu"){e=J(e,t);continue}e.hide(t)}e=y(e)}}function Z(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function we(e,t,o,n){const i=x(!1),l=x(!1);let r=null;const m={},T=n===!0&&Z(e);function F(b){if(b===!0){_(m),l.value=!0;return}l.value=!1,i.value===!1&&(T===!1&&r===null&&(r=A()),i.value=!0,g.push(e.proxy),U(m))}function S(b){if(l.value=!1,b!==!0)return;_(m),i.value=!1;const q=g.indexOf(e.proxy);q>-1&&g.splice(q,1),r!==null&&(G(r),r=null)}return I(()=>{S(!0)}),Object.assign(e.proxy,{__qPortalInnerRef:t}),{showPortal:F,hidePortal:S,portalIsActive:i,portalIsAccessible:l,renderPortal:()=>T===!0?o():i.value===!0?[X(Y,{to:r},o())]:void 0}}const he={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function ve(e,t){const o=x(t.value);return K(t,n=>{N(()=>{o.value=n})}),{transition:H(()=>"q-transition--"+(o.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:H(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const ee=[null,document,document.body,document.scrollingElement,document.documentElement];function ye(e,t){let o=Q(t);if(o===void 0){if(e==null)return window;o=e.closest(".scroll,.scroll-y,.overflow-auto")}return ee.includes(o)?window:o}function te(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function oe(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let h;function ge(){if(h!==void 0)return h;const e=document.createElement("p"),t=document.createElement("div");C(e,{width:"100%",height:"200px"}),C(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const o=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return o===n&&(n=t.clientWidth),t.remove(),h=o-n,h}function ne(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}const u=[];let f;function ie(e){f=e.keyCode===27}function re(){f===!0&&(f=!1)}function le(e){f===!0&&(f=!1,R(e,27)===!0&&u[u.length-1](e))}function V(e){window[e]("keydown",ie),window[e]("blur",re),window[e]("keyup",le),f=!1}function me(e){s.is.desktop===!0&&(u.push(e),u.length===1&&V("addEventListener"))}function be(e){const t=u.indexOf(e);t>-1&&(u.splice(t,1),u.length===0&&V("removeEventListener"))}const c=[];function D(e){c[c.length-1](e)}function Ee(e){s.is.desktop===!0&&(c.push(e),c.length===1&&document.body.addEventListener("focusin",D))}function Le(e){const t=c.indexOf(e);t>-1&&(c.splice(t,1),c.length===0&&document.body.removeEventListener("focusin",D))}function Pe(e,t,o){let n;function i(){n!==void 0&&(W.remove(n),n=void 0)}return z(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){n={condition:()=>o.value===!0,handler:t},W.add(n)}}}let p=0,E,L,w,P=!1,O,$,d;function se(e){ae(e)&&j(e)}function ae(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=B(e),o=e.shiftKey&&!e.deltaX,n=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=o||n?e.deltaY:e.deltaX;for(let l=0;l<t.length;l++){const r=t[l];if(ne(r,n))return n?i<0&&r.scrollTop===0?!0:i>0&&r.scrollTop+r.clientHeight===r.scrollHeight:i<0&&r.scrollLeft===0?!0:i>0&&r.scrollLeft+r.clientWidth===r.scrollWidth}return!0}function k(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function v(e){P!==!0&&(P=!0,requestAnimationFrame(()=>{P=!1;const{height:t}=e.target,{clientHeight:o,scrollTop:n}=document.scrollingElement;(w===void 0||t!==window.innerHeight)&&(w=o-t,document.scrollingElement.scrollTop=n),n>w&&(document.scrollingElement.scrollTop-=Math.ceil((n-w)/8))}))}function M(e){const t=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:n,overflowX:i}=window.getComputedStyle(t);E=oe(window),L=te(window),O=t.style.left,$=t.style.top,t.style.left=`-${E}px`,t.style.top=`-${L}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),n!=="hidden"&&(n==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,s.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",v,a.passiveCapture),window.visualViewport.addEventListener("scroll",v,a.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",k,a.passiveCapture))}s.is.desktop===!0&&s.is.mac===!0&&window[`${e}EventListener`]("wheel",se,a.notPassive),e==="remove"&&(s.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",v,a.passiveCapture),window.visualViewport.removeEventListener("scroll",v,a.passiveCapture)):window.removeEventListener("scroll",k,a.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=O,t.style.top=$,window.scrollTo(E,L),w=void 0)}function ue(e){let t="add";if(e===!0){if(p++,d!==void 0){clearTimeout(d),d=void 0;return}if(p>1)return}else{if(p===0||(p--,p>0))return;if(t="remove",s.is.ios===!0&&s.is.nativeMobile===!0){clearTimeout(d),d=setTimeout(()=>{M(t),d=void 0},100);return}}M(t)}function xe(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,ue(t))}}}export{xe as a,te as b,oe as c,ge as d,he as e,ve as f,ye as g,we as h,Ee as i,be as j,me as k,J as l,fe as m,pe as n,g as p,Le as r,Pe as u};
