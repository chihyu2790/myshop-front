import{Q as _}from"./QImg.0d3437a0.js";import{Q as l}from"./QSeparator.87df3f89.js";import{Q as h}from"./QSpace.8261e0c9.js";import{I as y,F as q,a as p,K as r,L as g,M as d,av as Q,a9 as k,R as t,O as o,aa as C,ab as j,ac as c,U as S,ad as B,S as n,Q as z}from"./index.d8b3df7e.js";import{Q as x}from"./QCard.fe9dec6c.js";import{Q as F}from"./QPage.d05c5b3a.js";import"./use-dark.8a152d4a.js";const P={class:"container"},I={class:"row q-mb-lg-xl"},N={class:"col-12"},L=t("div",{class:"text-h5 text-weight-medium q-my-md"},"\u8CFC\u7269\u8ECA",-1),U={class:"col-12 col-lg-8 q-pr-none q-pr-lg-md"},V=t("div",{class:"text-h5 text-weight-medium"},"\u5546\u54C1\u8CC7\u8A0A",-1),$={class:"row"},A={class:"col-7 column q-ml-xs q-ml-lg-md"},D={class:"text-h6 over-2line"},E={class:"text-subtitle1 text-weight-medium"},G={class:"text-subtitle1 text-weight-medium over-1line"},K={class:"text-subtitle1 text-weight-medium"},M={class:"col column items-end"},O={class:"text-subtitle1 text-weight-medium"},R={class:"col-12 col-lg-4"},T={class:"row justify-between"},H=t("div",{class:"text-subtitle1 text-weight-medium"},"\u7E3D\u91D1\u984D",-1),J={class:"text-subtitle1 text-weight-regular"},W={class:"row justify-between"},X=t("div",{class:"text-subtitle1 text-weight-medium"},"\u5546\u54C1\u91D1\u984D",-1),Y={class:"text-subtitle1 text-weight-regular"},Z=t("div",{class:"row justify-between"},[t("div",{class:"text-subtitle1 text-weight-medium"},"\u904B\u8CBB"),t("div",{class:"text-subtitle1 text-weight-regular"},"80")],-1),tt={class:"row justify-between"},st=t("div",{class:"text-subtitle1 text-weight-medium"},"\u7E3D\u91D1\u984D",-1),et={class:"text-subtitle1 text-weight-regular"},mt={__name:"CartPage",setup(ot){const v=y(),i=q([]),w=p(()=>i.reduce((a,e)=>a+e.product.price*e.quantity,0)),u=p(()=>{const s=i.reduce((a,e)=>a+e.product.price*e.quantity,0);return s===0?0:s>=1500?s:s+80}),f=async s=>{await v.deleteCart({product:i[s].product._id,color:i[s].color,size:i[s].size}),m()},m=async()=>{try{const{data:s}=await Q.get("/users/cart");i.splice(0,i.length),i.push(...s.result),console.log(i)}catch(s){console.log(s),k.fire({icon:"error",title:"\u5931\u6557",text:"\u4F3A\u670D\u5668\u932F\u8AA4"})}};return m(),(s,a)=>(r(),g(F,null,{default:d(()=>[t("section",P,[t("div",I,[t("div",N,[o(_,{src:"https://i.imgur.com/hFiccGF.jpg",class:"pointer object-top",ratio:7/1}),L,o(l,{class:"q-my-sm"})]),t("div",U,[V,(r(!0),C(B,null,j(i,(e,b)=>(r(),g(x,{flat:"",class:"q-my-md",key:e._id},{default:d(()=>[t("div",$,[o(_,{class:"col-2 col-sm-3",src:e.product.image[0]},null,8,["src"]),t("div",A,[t("div",D,c(e.product.name),1),o(h),t("div",E,"\u5546\u54C1\u5C3A\u5BF8:"+c(e.size),1),t("div",G,"\u5546\u54C1\u984F\u8272:"+c(e.color),1),t("div",K,"\u6578\u91CF:"+c(e.quantity),1)]),t("div",M,[t("div",null,[o(S,{name:"fa-solid fa-x",size:"sm",class:"pointer",onClick:it=>f(b)},null,8,["onClick"])]),o(h),t("div",O,"NT$:"+c(e.product.price*e.quantity),1)])]),o(l,{class:"q-my-md"})]),_:2},1024))),128))]),t("div",R,[o(x,{flat:"",square:"",class:"column bg-grey-2 q-pa-md q-mb-md q-mt-sm"},{default:d(()=>[t("div",T,[H,t("div",J,c(n(u)),1)]),o(l,{class:"q-my-md"}),t("div",W,[X,t("div",Y,c(n(w)),1)]),Z,o(l,{class:"q-my-md"}),t("div",tt,[st,t("div",et,c(n(u)),1)])]),_:1}),o(z,{outline:"",color:"black",class:"full-width q-py-sm text-subtitle1 text-weight-medium",label:"\u5546\u54C1\u7D50\u5E33",to:"/place"})])])])]),_:1}))}};export{mt as default};
