import{b as m,a as f}from"./QTabs.e8789249.js";import{Q as _}from"./QSpace.ab43215f.js";import{Q as c,a as w}from"./QTable.e3b07091.js";import{q as u,x as d,y as v,z as s,au as q,X as y,A as Q,D as t,B as o,a0 as k,_ as a,Y as p,Q as h,E as P}from"./index.0d4fdb09.js";import{Q as T}from"./QCard.08b29dcf.js";import{Q as B}from"./QPage.ba57bee6.js";import{u as N}from"./use-quasar.21088ab3.js";import"./use-timeout.dfa2929f.js";import"./rtl.4b414a6d.js";import"./QSeparator.d36ff4c0.js";import"./use-dark.60ffaa8c.js";import"./QList.1bf52696.js";import"./scroll.9caef855.js";import"./use-key-composition.43e9e573.js";import"./uid.42677368.js";import"./use-form.299f2ee0.js";import"./QChip.3ce772c0.js";import"./QItem.b179d4fb.js";import"./use-fullscreen.6d8fb160.js";import"./use-model-toggle.6de98c5b.js";import"./QDialog.e412d48d.js";import"./QCheckbox.827ae7d1.js";import"./option-sizes.76e9a136.js";const D={class:"row lt-lg justify-center border-black bg-grey-2 q-py-xs"},S={class:"container"},C={class:"row q-mt-none q-mt-lg-xl"},V={class:"col-2 gt-md"},$=t("div",{class:"text-h6"},"\u6211\u7684\u5E33\u6236",-1),A=t("div",{class:"text-subtitle1 q-my-lg"},"\u500B\u4EBA\u8CC7\u6599",-1),E=t("div",{class:"text-subtitle1 q-my-lg"},"\u8A02\u55AE\u67E5\u8A62",-1),j={class:"col-12 col-lg-10"},z={class:"flex items-center text-center q-mb-lg q-mt-lg q-mt-lg-none"},L=t("div",{class:"text-h4 text-weight-medium"},"\u8A02\u55AE\u67E5\u8A62",-1),O=t("div",{class:"text-body1 q-mb-md"},"\u8A02\u55AE\u67E5\u8A62\u9801\u9762",-1),R={key:0},X={key:1},Y={class:"row"},F={class:"column"},G=t("div",{class:"text-subtitle1 text-weight-medium"},"\u8A02\u55AE\u65E5\u671F",-1),H={class:"text-subtitle1 text-weight-medium"},I=t("div",{class:"text-subtitle1 text-weight-medium"},"\u8A02\u55AE\u7DE8\u865F",-1),J={class:"text-subtitle1 text-weight-medium"},K=t("div",{class:"text-subtitle1 text-weight-medium"},"\u50F9\u9322",-1),M={class:"text-subtitle1 text-weight-medium"},qt={__name:"OrderPage",setup(U){const g=N(),x=u({item:[],page:1,rowsPerPage:0}),b=[{name:"date",align:"left",label:"\u8A02\u55AE\u65E5\u671F",field:"date"},{name:"_id",align:"left",label:"\u8A02\u55AE\u7DE8\u865F",field:"_id"},{name:"totalPrice",align:"left",label:"\u50F9\u9322",field:"totalPrice"},{name:"edit",label:"",align:"left",field:"edit"}],n=u([]);return(async()=>{try{const{data:r}=await q.get("/orders");n.push(...r.result.map(i=>(i.totalPrice=i.products.reduce((l,e)=>l+e.product.price*e.quantity,0),i)))}catch{y.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(r,i)=>{const l=Q("router-link");return d(),v(B,null,{default:s(()=>[t("div",D,[o(f,{"indicator-color":"red",shrink:""},{default:s(()=>[o(m,{exact:"",name:"/user",to:"/user",label:"\u500B\u4EBA\u8CC7\u6599"}),o(m,{exact:"",name:"/order",to:"/order",label:"\u8A02\u55AE\u67E5\u8A62"})]),_:1})]),t("section",S,[t("div",C,[t("div",V,[$,o(l,{to:"/user"},{default:s(()=>[A]),_:1}),o(l,{to:"/order"},{default:s(()=>[E]),_:1})]),t("div",j,[t("div",z,[L,o(_)]),O,o(w,{grid:P(g).screen.sm,flat:"",bordered:"",rows:n,columns:b,"row-key":"name",pagination:x},{"body-cell-date":s(e=>[o(c,{date:e},{default:s(()=>[k(a(e.row.date),1)]),_:2},1032,["date"])]),"body-cell-totalPrice":s(e=>[o(c,{date:e},{default:s(()=>[e.row.totalPrice<1500?(d(),p("span",R,"NT$ "+a(e.row.totalPrice+80),1)):(d(),p("span",X,"NT$ "+a(e.row.totalPrice),1))]),_:2},1032,["date"])]),"body-cell-edit":s(e=>[o(c,{edit:e},{default:s(()=>[t("div",Y,[o(_),o(h,{outline:"",class:"q-px-xl",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1032,["edit"])]),item:s(e=>[o(T,{class:"q-pa-md q-ma-sm",bordered:"",flat:""},{default:s(()=>[t("div",F,[G,t("div",H,a(new Date(e.row.date).toLocaleDateString()),1),I,t("div",J,a(e.row._id),1),K,t("div",M,a(e.row.totalPrice),1),o(h,{outline:"",class:"q-px-xl q-m",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1024)]),_:1},8,["grid","rows","pagination"])])])])]),_:1})}}};export{qt as default};
