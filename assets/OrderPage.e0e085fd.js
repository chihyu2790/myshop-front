import{b as m,a as f}from"./QTabs.632de5b5.js";import{Q as _}from"./QSpace.212648d1.js";import{Q as c,a as w}from"./QTable.7fb2668c.js";import{F as p,P as v,H as d,I as y,J as s,ay as q,aj as Q,S as t,K as o,L as k,M as a,V as u,Q as g,T as P}from"./index.eea27d61.js";import{Q as T}from"./QCard.142af412.js";import{Q as S}from"./QPage.6dfcaeca.js";import{u as B}from"./use-quasar.173aa476.js";import"./use-timeout.09ac0e3b.js";import"./rtl.4b414a6d.js";import"./QSeparator.064ca9a1.js";import"./use-dark.a2cfe63f.js";import"./QList.0d47f578.js";import"./use-prevent-scroll.b1cae2a4.js";import"./focus-manager.d6507951.js";import"./use-key-composition.fd05f9d7.js";import"./format.2a3572e1.js";import"./uid.42677368.js";import"./QChip.27b33b74.js";import"./QMenu.904a3f1b.js";import"./selection.c512185d.js";import"./use-model-toggle.5b3b2788.js";import"./QDialog.aba9db4f.js";import"./use-form.0e69a4df.js";import"./QCheckbox.7c6115a4.js";import"./option-sizes.3fff056c.js";import"./use-fullscreen.6f5d95cf.js";const D={class:"row lt-lg justify-center border-black bg-grey-2 q-py-xs"},N={class:"container"},V={class:"row q-mt-none q-mt-lg-xl"},C={class:"col-2 gt-md"},L=t("div",{class:"text-h6"},"\u6211\u7684\u5E33\u6236",-1),$=t("div",{class:"text-subtitle1 q-my-lg"},"\u500B\u4EBA\u8CC7\u6599",-1),j=t("div",{class:"text-subtitle1 q-my-lg"},"\u8A02\u55AE\u67E5\u8A62",-1),A={class:"col-12 col-lg-10"},E={class:"flex items-center text-center q-mb-lg q-mt-lg q-mt-lg-none"},F=t("div",{class:"text-h4 text-weight-medium"},"\u8A02\u55AE\u67E5\u8A62",-1),H=t("div",{class:"text-body1 q-mb-md"},"\u8A02\u55AE\u67E5\u8A62\u9801\u9762",-1),I={key:0},J={key:1},K={class:"row"},M={class:"col-12 col-sm-6 q-pa-sm"},O={class:"column"},R=t("div",{class:"text-subtitle1 text-weight-bold"},"\u8A02\u55AE\u65E5\u671F",-1),z={class:"text-subtitle1 text-weight-regular"},G=t("div",{class:"text-subtitle1 text-weight-bold"},"\u8A02\u55AE\u7DE8\u865F",-1),U={class:"text-subtitle1 text-weight-regular"},W=t("div",{class:"text-subtitle1 text-weight-bold"},"\u50F9\u9322",-1),X={class:"text-subtitle1 text-weight-regular q-mb-lg"},Pt={__name:"OrderPage",setup(Y){const b=B(),h=p({item:[],page:1,rowsPerPage:0}),x=[{name:"date",align:"left",label:"\u8A02\u55AE\u65E5\u671F",field:"date"},{name:"_id",align:"left",label:"\u8A02\u55AE\u7DE8\u865F",field:"_id"},{name:"totalPrice",align:"left",label:"\u50F9\u9322",field:"totalPrice"},{name:"edit",label:"",align:"left",field:"edit"}],n=p([]);return(async()=>{try{const{data:r}=await q.get("/orders");n.push(...r.result.map(i=>(i.totalPrice=i.products.reduce((l,e)=>l+e.product.price*e.quantity,0),i)))}catch{Q.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(r,i)=>{const l=v("router-link");return d(),y(S,{class:"q-mb-xxxl"},{default:s(()=>[t("div",D,[o(f,{"indicator-color":"red",shrink:""},{default:s(()=>[o(m,{exact:"",name:"/user",to:"/user",label:"\u500B\u4EBA\u8CC7\u6599"}),o(m,{exact:"",name:"/order",to:"/order",label:"\u8A02\u55AE\u67E5\u8A62"})]),_:1})]),t("section",N,[t("div",V,[t("div",C,[L,o(l,{to:"/user"},{default:s(()=>[$]),_:1}),o(l,{to:"/order"},{default:s(()=>[j]),_:1})]),t("div",A,[t("div",E,[F,o(_)]),H,o(w,{flat:"",bordered:"",grid:P(b).screen.lt.lg,rows:n,columns:x,"row-key":"name",pagination:h},{"body-cell-date":s(e=>[o(c,{date:e},{default:s(()=>[k(a(new Date(e.row.date).toLocaleDateString()),1)]),_:2},1032,["date"])]),"body-cell-totalPrice":s(e=>[o(c,{date:e},{default:s(()=>[e.row.totalPrice<1500?(d(),u("span",I,"NT$ "+a(e.row.totalPrice+80),1)):(d(),u("span",J,"NT$ "+a(e.row.totalPrice),1))]),_:2},1032,["date"])]),"body-cell-edit":s(e=>[o(c,{edit:e},{default:s(()=>[t("div",K,[o(_),o(g,{outline:"",class:"q-px-xl",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1032,["edit"])]),item:s(e=>[t("div",M,[o(T,{class:"q-pa-md",bordered:"",flat:""},{default:s(()=>[t("div",O,[R,t("div",z,a(new Date(e.row.date).toLocaleDateString()),1),G,t("div",U,a(e.row._id),1),W,t("div",X,a(e.row.totalPrice),1),o(g,{outline:"",color:"black",label:"\u8A73\u7D30\u8A02\u55AE\u8CC7\u8A0A",to:"/order/"+e.row._id},null,8,["to"])])]),_:2},1024)])]),_:1},8,["grid","rows","pagination"])])])])]),_:1})}}};export{Pt as default};
